@page "/"
@using CertiPurge.Data
@using Microsoft.AspNetCore.Authorization
@using OCR;
@using Tesseract
@rendermode InteractiveServer
@inject IJSRuntime JS
@inject ApplicationDbContext DbContext

@attribute [Authorize]

<PageTitle>Home</PageTitle>

<div class="pt-8"
	<table>
		<thead class="bg-red-700">
			<tr class="text-white">
					<th>Name</th>
					<th>Course</th>
					<th>Grade</th>
					<th>Centre Number</th>
					<th>Candidate Number</th>
			</tr>

		</thead>
		<tbody>
			@foreach (var cert in CertificatesData)
			{
				<tr class="">
					<td>@cert.Name</td>
					<td>@cert.Course</td>
					<td>@cert.Grade</td>
					<td>@cert.CentreNumber</td>
					<td>@cert.CandidateNumber</td>
				</tr>
			}
		</tbody>
	</table>
</div>

@code {
	public class FileData
	{
		public string Name { get; set; } = "";
		public string Data { get; set; } = "";
		public long Size { get; set; }
		public string Type { get; set; } = "";
	}

	public List<Certificate> CertificatesData = new List<Certificate>();

	public bool IsProcessing { get; set; } = false;

	protected override async Task OnInitializedAsync()
	{
		CertificatesData = DbContext.Certificates.ToList();
	}
}